# Next.js

React를 활용하는 프레임워크

- 정해진 틀 안에서 개발을 해야하다보니 자유도가 떨어짐 ⇒ 갖추어져 있는 것은 참 많지만 자유도는 떨어진다...
- 서버사이드렌더링 가능

### 일반적인 흐름

[브라우저] —- /blog —→ [프론트 서버] —— /posts —→ [백엔드 서버] —query data—> [DB]

←—————-                       ←——————                       ←———————

- 로딩 속도가 오래걸림
  - 3초안에 사람이 떠난다 (화면이 보이기 시작하면 인내심이 늘어남)
  - 3초안에는 화면이 보여져야 한다

### CSR (Client Side Rendering)

- SPA라서 페이지가 넘어가는 것 처럼 눈속임 (컴포넌트가 바뀌는 거쥬)

- 화면은 보여주지만 데이터가 없으니 로딩창을 보여준다 ⇒ 화면이 보이니 잔류율 올라감

  - 요청을 백엔드에게 바로 보내기

  - [브라우저] ——— /posts ————> [백엔드] ————→ [DB]

    ```
                  ←——————————-              ←————
    ```

  - [프론트] 는 뭔 URL을 요청하든 하나의 파일만 내려줌 (js, html, css, assets) ⇒ Single Page

- 데이터까지 가져와야하는 시간은 사실 더 걸릴 수 있지만 **화면이 보여지는 시간이 단축될 수 있음**

- 어떤 서비스(비즈니스)는 리액트를 사용하지 않는 경우가 더 좋을 수 있기도 함

  - 리액트를 써야할 때는? ⇒ 사용자 인터랙션이 빠르게 일어나야 할 때
  - [SEO] 검색엔진에서 긁어올 때, 로딩바만 있네? 하고 ⇒ 검색엔진에서 순위가 확 떨어질 수가 있음
    - 구글은 괜찮음 ⇒ 백엔드에서 곧 가져오겠구나..
    - 국내에서는 '뭐야 만들다 말았네?' 하고 나가버림

### SSR (Server Side Rendering)

- SEO...... 검색 엔진을 위해서
- 코드 스플리팅
- 프리렌더 : 검색엔진일 때만 백엔드 서버에서 데이터를 받아서 html완성해서 줌
  - 일반유저일때는 일반 리액트 방법
- 서버사이드렌더링 (or 하이브리드)
  - 첫 방문만 전통적인 방법
  - 그 이후부터는 리액트 방식으로
  - 상세페이지는 나중에... 
- 실무에서는 꼭 적용해야함 ⇒ 대부분의 서비스는 검색엔진에 노출되어야 하니까
- 특정 주소로 들어갈 때 로딩창이 없는 이유
  - 데이터 없이 받아오니까 로딩창이 있는 것인데 SSR을 쓰면 **첫 방문 페이지만 데이터베이스까지 거쳐 받아옴** → **링크를 통해 다른 페이지로 들어갈 때는 백엔드를 통해 데이터만 받아옴**
- SSR도 당연히 브라우저 - 백엔드 간의 CORS 설정 필요

### Next.js 사용하지 않아도 되는 경우

- 코드스플리팅, 서버사이드렌더링 노필요
- 예시 : 어드민 페이지 (좀 느려도 괜찮, 검색 노필요)
- 실제 고객들이 접근하는 페이지!