# 00_개요

데이터베이스의 역사와 NoSQL의 탄생 배경을 살펴보며 철학을 이해하자!



※ 개인적으로 이해한 내용을 적은 것이므로 잘못되었거나 부족한 내용이 있을 수 있습니다.

# NoSQL?

> 'SQL을 사용하지 않는다.', 'SQL만 있는 것이 아니다.'

* 분산처리, 고정되지 않은 스키마, 고가용성, 고확장성

* 키-값 / 도큐먼트 / 컬럼패밀리 / 그래프



# 데이터베이스 관리 시스템의 역사

## 1. 초기 데이터베이스 관리 시스템

파일 시스템, 데이터베이스 시스템

* 플랫 파일 데이터 관리 시스템 : 데이터 관리의 초기 형태
* 계층형 데이터 관리 시스템
* 네트워크 데이터 관리 시스템

### 1.1. 플랫 파일 데이터 관리 시스템

데이터 세트를 플랫 파일로 관리하는 시스템. 디스크/자기테이프 등의 장기 기억 저장장치에 저장하는 방식. 

단일 레코드에 단일 엔티티가 결합된 형태로 데이터 저장

#### 특징 및 한계점

* 물리적 제약 존재
* 플랫파일을 사용하는 프로그램이 데이터의 구조를 결정
* 중복데이터 발생 가능
* 데이터 구조가 변할 수 있다
* 권한 설정이 어렵다 : 부서별로 보여지는 데이터가 다르게 하려면 하나 더 만들어야 함.
* 데이터 일관성이 훼손될 가능성 존재

### 1.2. 계층형 데이터 모델 시스템

플랫 파일 데이터 관리 시스템의 한계점 중, **검색의 비효율성**을 극복하기 위해 고안된 시스템.

부모-자식 계층구조 (1:N)

#### 특징 및 한계점

* 1:N 인 경우 효율적 
  * N:M 인 경우는 비효율 :  데이터 복제가 이루어져야 하기 때문
* 중복데이터 발생 필요
* 데이터 일관성이 훼손될 가능성 존재
* 데이터 집계시 오류 발생 가능성 존재

### 1.3. 네트워크 데이터 관리 시스템

계층형 모델의 한계점을 극복하기 위해 고안된 시스템

**그래프 형태의 N:M 계층구조**

* 네트워크 데이터 모델 : 스키마, 데이터베이스

#### 구조

서로 연결된 데이터 레코드로 구성

* 노드(node) : 데이터 레코드
* 엣지(edge) : 연결 정보
* 그래프(graph) : 노드와 엣지의 묶음
* 스키마(schema) : 다른 노드와 연결할 수 있는 종류의 노드. 노드간 유효한 관계(valid relation)을 정의함
* 데이터베이스(database) : 스키마 구조에 따라 실제 데이터가 저장되는 곳

#### 특징 및 한계점

* 단방향 비순환 그래프
* 설계, 관리가 어렵다
  * 노드 연결 구조에 따라 성능이 크게 차이날 수 있다
* 스키마가 변경되면 데이터베이스에 접근하는 프로그램도 수정되어야 한다

### 1.4. 전반적인 한계점

초기 데이터 관리 시스템들의 한계점을 정리해보자면 다음과 같다.

* 중복 데이터
* 보안기능 구현의 어려움 : 취약한 보안
* 비효율적인 탐색 : 느린 검색 속도
* 데이터베이스에 접근하는 프로그램 코드 관리의 어려움
  * 데이터베이스의 논리 구성과 물리 저장구조가 독립적이지 않기 때문



## 2. 관계형 데이터베이스 (RDB)

데이터 구조의 논리구성을 물리적인 저장구조와 분리. 데이터 비일관성 문제 해결.

### 특징

* 데이터 관리를 위한 언어인 SQL을 공통언어로 사용하도록 설계

### RDMS의 구조

* 스토리지 관리 프로그램
  * 장기 기억 저장 장치
* 메모리 관리 프로그램
* 데이터 사전 : 데이터베이스를 구성하는 여러가지 요소에 대한 정보를 포함함
  * 스키마, 테이블, 컬럼, 인덱스, 제약조건, 뷰
* 질의 언어
  * 데이터 정의 언어, 데이터 조작 언어

### RDBMS를 사용하는 애플리케이션의 구조

RDBMS를 사용하여 개발된 애플리케이션은 일반적으로 다음과 같은 구조를 가진다.

* 사용자 인터페이스
* 비즈니스 로직
* 데이터베이스 코드

### 한계점

대부분의 경우 거의 완벽한 시스템으로 사용되었지만, 최근 개인화된 데이터가 증가함에 따라 빅데이터화된 정보들을 처리하는데에는 한계가 있었다.

큰 규모의 데이터와 극도로 많은 수의 사용자를 대상으로 작업하는 앱 개발시에는 다음과 같은 사항들이 지원되어야 했다.

* 대용량 데이터의 읽기와 쓰기 작업
* 빠른 응답시간
* 높은 가용성

#### 해결하기 위한 방법들

* 수직적 확장 : CPU, 추가메모리, 저장장치 업그레이드 등
  * 비용 많이 듦... 임시방편....
* 비정규화(denormalization)
* 서버 여러대에 하나의 RDB를 사용 : 관리의 어려움 존재 / 트랜잭션 비용 증가



## 3. NoSQL 데이터베이스

전자 상거래와 소셜 미디어의 기하급수적인 성장으로 인해 데이터가 점점 커지기 시작했다. 더이상 관계형 데이터베이스로는 대용량 데이터를 관리하기 어려워졌다.

### 대용량 데이터 관리 시스템의 중요한 특징들

확장성, 비용, 유연성, 가용성

#### 확장성

크게 변화하는 작업 부하량에 대한 요구 사항을 효율적으로 충족시키는 능력.

* **스케일 업** : 프로세서, 메모리, 네트워크 대역폭 추가 등의 하드웨어/소프트웨어 적인 스펙을 업그레이드 한다. (수직적 확장)
  * 확장 시 운영 중지 시간(downtime)이 존재할 수 있음.
* **스케일 아웃** : 트래픽이 증가하면 서버를 증설하여 부하를 처리한다. 트래픽이 감소하면 증설했던 서버를 내린다. (수평적 확장)

상황에 따라 필요한 만큼의 서버만 추가/제거할 수 있는 **스케일 아웃**이 좀 더 유연한 방법이라고 할 수 있다.

#### 비용

NoSQL 데이터베이스 대부분이 오픈소스이다. 

#### 유연성

관계형 데이터베이스에서는 테이블, 컬럼 등을 크게 변경이 일어나지 않게끔 기존에 미리 정의하고 설계하여야 한다. NoSQL 데이터베이스에서는 설계의 변경 없이 테이블 구조를 변경할 수 있다. 즉, 고정된 테이블 구조가 필요하지 않다. 필요할 때에 동적으로 변경할 수 있다.

#### 가용성

NoSQL 데이터베이스는 서버를 여러개 사용할 수 있기 때문에 무정지 데이터베이스로서 사용할 수 있다. 하나의 서버가 중지되어도 다른 서버가 처리할 수 있기 때문. (주서버-백업서버...)



## 4. 결론

NoSQL이 RDB의 빅데이터를 처리하는 것에 대한 한계점으로 인해 출현하게 되었지만 RDB를 완벽하게 대체 할 수는 없다. NoSQL과 RDB는 **상호 보완적**으로 사용되어야 한다.

